<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Streamflow Forecasting Onboarding - Installation: Windows</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="../../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../../site_libs/quarto-nav/headroom.min.js"></script>
<script src="../../site_libs/clipboard/clipboard.min.js"></script>
<script src="../../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../../site_libs/quarto-search/fuse.min.js"></script>
<script src="../../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../../">
<link href="../.././img/favicon.png" rel="icon" type="image/png">
<script src="../../site_libs/quarto-html/quarto.js"></script>
<script src="../../site_libs/quarto-html/popper.min.js"></script>
<script src="../../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../../site_libs/quarto-html/anchor.min.js"></script>
<link href="../../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-text-highlighting-styles">
<link href="../../site_libs/quarto-html/quarto-syntax-highlighting-dark.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-text-highlighting-styles">
<script src="../../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../../site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" class="quarto-color-scheme" id="quarto-bootstrap" data-mode="light">
<link href="../../site_libs/bootstrap/bootstrap-dark.min.css" rel="prefetch" class="quarto-color-scheme quarto-color-alternate" id="quarto-bootstrap" data-mode="dark">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="../../styles.css">
</head>

<body class="nav-sidebar floating nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="../../index.html" class="navbar-brand navbar-brand-logo">
    <img src="../.././img/favicon.png" alt="" class="navbar-logo">
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="../../index.html">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../../installation.html" aria-current="page">
 <span class="menu-text">Installation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../documentation.html">
 <span class="menu-text">Documentation</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../../faq.html">
 <span class="menu-text">FAQ</span></a>
  </li>  
</ul>
            <ul class="navbar-nav navbar-nav-scroll ms-auto">
  <li class="nav-item compact">
    <a class="nav-link" href="https://github.com/csiro-hydroinformatics/"><i class="bi bi-github" role="img">
</i> 
 <span class="menu-text"></span></a>
  </li>  
</ul>
              <div class="quarto-toggle-container">
                  <a href="" class="quarto-color-scheme-toggle nav-link" onclick="window.quartoToggleColorScheme(); return false;" title="Toggle dark mode"><i class="bi"></i></a>
              </div>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title">Installation: Windows</h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation floating overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../installation.html" class="sidebar-item-text sidebar-link">Installation</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../doc/installation/install_windows.html" class="sidebar-item-text sidebar-link active">Installation: Windows</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../doc/installation/install_linux.html" class="sidebar-item-text sidebar-link">Installation: Debian based Linux</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../doc/installation/install_macosx.html" class="sidebar-item-text sidebar-link">Installation: MacOSX</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../doc/installation/install_docker.html" class="sidebar-item-text sidebar-link">Installation: via Docker</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../../doc/installation/install_source.html" class="sidebar-item-text sidebar-link">Installation: From source code</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Contents</h2>
   
  <ul>
  <li><a href="#introduction" id="toc-introduction" class="nav-link active" data-scroll-target="#introduction">Introduction</a></li>
  <li><a href="#installation-with-the-windows-installer" id="toc-installation-with-the-windows-installer" class="nav-link" data-scroll-target="#installation-with-the-windows-installer">Installation with the Windows installer</a>
  <ul class="collapse">
  <li><a href="#windows-installer" id="toc-windows-installer" class="nav-link" data-scroll-target="#windows-installer">Windows installer</a></li>
  </ul></li>
  <li><a href="#checking-the-base-installation" id="toc-checking-the-base-installation" class="nav-link" data-scroll-target="#checking-the-base-installation">Checking the base installation</a></li>
  <li><a href="#uninstalling" id="toc-uninstalling" class="nav-link" data-scroll-target="#uninstalling">Uninstalling</a></li>
  <li><a href="#manual-installation-of-libraries" id="toc-manual-installation-of-libraries" class="nav-link" data-scroll-target="#manual-installation-of-libraries">Manual installation of libraries</a>
  <ul class="collapse">
  <li><a href="#installing-shared-dynamic-libraries" id="toc-installing-shared-dynamic-libraries" class="nav-link" data-scroll-target="#installing-shared-dynamic-libraries">Installing shared (dynamic) libraries</a>
  <ul class="collapse">
  <li><a href="#adding-environment-variable-library_path" id="toc-adding-environment-variable-library_path" class="nav-link" data-scroll-target="#adding-environment-variable-library_path">Adding environment variable LIBRARY_PATH</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#installing-packages" id="toc-installing-packages" class="nav-link" data-scroll-target="#installing-packages">Installing packages</a>
  <ul class="collapse">
  <li><a href="#r-packages" id="toc-r-packages" class="nav-link" data-scroll-target="#r-packages">R packages</a>
  <ul class="collapse">
  <li><a href="#adding-an-r_libs-environment-variable" id="toc-adding-an-r_libs-environment-variable" class="nav-link" data-scroll-target="#adding-an-r_libs-environment-variable">Adding an R_LIBS environment variable</a></li>
  <li><a href="#installing-an-r-package" id="toc-installing-an-r-package" class="nav-link" data-scroll-target="#installing-an-r-package">Installing an R package</a></li>
  </ul></li>
  <li><a href="#python-packages" id="toc-python-packages" class="nav-link" data-scroll-target="#python-packages">Python packages</a>
  <ul class="collapse">
  <li><a href="#python-environments" id="toc-python-environments" class="nav-link" data-scroll-target="#python-environments">Python environments</a></li>
  <li><a href="#installing-python-packages" id="toc-installing-python-packages" class="nav-link" data-scroll-target="#installing-python-packages">Installing Python packages</a></li>
  </ul></li>
  <li><a href="#matlab-functions" id="toc-matlab-functions" class="nav-link" data-scroll-target="#matlab-functions">Matlab functions</a>
  <ul class="collapse">
  <li><a href="#cc-compiler-visual-studio" id="toc-cc-compiler-visual-studio" class="nav-link" data-scroll-target="#cc-compiler-visual-studio">C/C++ compiler Visual Studio</a></li>
  <li><a href="#installing-mingw64" id="toc-installing-mingw64" class="nav-link" data-scroll-target="#installing-mingw64">Installing Mingw64</a></li>
  <li><a href="#compiling-the-mex-code-for-swift" id="toc-compiling-the-mex-code-for-swift" class="nav-link" data-scroll-target="#compiling-the-mex-code-for-swift">Compiling the MEX code for swift</a></li>
  </ul></li>
  </ul></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title d-none d-lg-block">Installation: Windows</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<section id="introduction" class="level1">
<h1>Introduction</h1>
<p>This document is a short guide to install on Windows the CSIRO ensemble streamflow forecasting software stack that includes tools known as SWIFT2, FoGSS, CHyPP.</p>
<p>As of 2023-04-24 it is recommended to use a Windows Installer (MSI file). The manual setup is kept in this document but is deprecated.</p>
</section>
<section id="installation-with-the-windows-installer" class="level1">
<h1>Installation with the Windows installer</h1>
<p>The windows installer v1.0 is available upon prior agreement from <a href="https://data.csiro.au/collection/csiro:58370v1">this web page</a>. You can see always see the web page but cannot download the installer without prior agreement (user credentials).</p>
<p>You should have access to a windows installer file “sf.msi” of around 40MB. This installer should work on at least Windows 10 or later. It may work on older versions of Windows but has not been tested.</p>
<p><img src="./media/image1.png" style="width:6.27in;height:1.86944in"></p>
<p>The installer is signed with a cryptographic signature certified by a third party, which should facilitate the approval from your IT department if required.</p>
<p><img src="./media/image2.png" style="width:4.00056in;height:1.85443in"></p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This document outlines the steps to perform for a “normal” user without particularly elevated privileges on the installation machine. It is possible to install as an Administrator for all users, but this is not documented here.</p>
</div>
</div>
<p>An installation consists of two steps in practice. The installer installs native libraries, sets environment variables, and copies installable packages for R, python, MATLAB. You can then use the latter to install these packages in your environment. There are many ways to manage R and python environments, so this step cannot be handled automatically by the windows installer.</p>
<section id="windows-installer" class="level2">
<h2 class="anchored" data-anchor-id="windows-installer">Windows installer</h2>
<p>Execute the file sf.msi</p>
<p><img src="./media/image3.png" style="width:5.15in;height:4.03181in"></p>
<p>Do read the license agreement. If you have access to this installer, you should already have had prior discussions with the product distributors to agree on the scope of use of the products.</p>
<p><img src="./media/image4.png" style="width:5.15in;height:4.03181in"></p>
<p>As a user-level installation you will be prompted with a conventional default location. You may change the destination folder if required.</p>
<p><img src="./media/image5.png" style="width:5.15in;height:4.03181in"></p>
<p><img src="./media/image6.png" style="width:5.15in;height:4.03181in"></p>
<p>The installation will typically take a few seconds to proceed.</p>
<p><img src="./media/image7.png" style="width:5.15in;height:4.03181in"></p>
<p><img src="./media/image8.png" style="width:5.15in;height:4.03181in"></p>
</section>
</section>
<section id="checking-the-base-installation" class="level1">
<h1>Checking the base installation</h1>
<p>One way to check the installation worked as desired is to open a new command prompt. The command <code>where chyppapp</code> should return a path.</p>
<p><img src="./media/image9.png" style="width:6.27in;height:1.88611in"></p>
<p>Then <code>chyppapp \--help</code> should work and display a help output.</p>
<p><img src="./media/image10.png" style="width:6.27in;height:1.58056in"></p>
</section>
<section id="uninstalling" class="level1">
<h1>Uninstalling</h1>
<p>The installer is well integrated in the Windows system, and to repair or uninstall the stack you can use the “Add and Remove software” panel of Windows. Uninstalling will remove all installed files and revert changes to the environment variables <code>PATH</code> and <code>LIBRARY_PATH</code></p>
<p><img src="./media/image11.png" style="width:6.27in;height:3.0875in"></p>
</section>
<section id="manual-installation-of-libraries" class="level1">
<h1>Manual installation of libraries</h1>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This manual procedure to install the stack is deprecated. Preferably use the windows installer as above.</p>
</div>
</div>
<p>You will have been given one or more links to the location of C++ compiled libraries (windows DLLs), and R and/or Python packages. You should have access to at least libs.7z. Other archives files (such as include.7z) may be present and used only for development. They are not necessary for most users.</p>
<p>The top level folder where you should install these libraries is not prescribed. This document uses <code>c:\local</code> for historical reasons, but this may not be a logical or feasible place depending on your organisational IT environment. You can replace it with another folder location in the rest of this document.</p>
<section id="installing-shared-dynamic-libraries" class="level2">
<h2 class="anchored" data-anchor-id="installing-shared-dynamic-libraries">Installing shared (dynamic) libraries</h2>
<p>This documentation is fairly prescriptive in terms of the location where you would install dynamic libraries. You can still choose the top level folder where you would install these libraries. This document uses <code>c:\local</code>, and you are encourage to adhere to this convention if you can logistically can.</p>
<p>You may have <code>7z</code> in your command line prompt, otherwise use Windows Explorer to extract the zip file from the 7Zip graphical user interface. You may replace <code>7z</code> with the full path, typically <code>"c:\Program Files\7-Zip\7z.exe"</code> with quotation marks.</p>
<pre class="bat"><code>if not defined local_dir set local_dir=c:\local
if not exist %local_dir% mkdir %local_dir%\libs\64

cd %local_dir%
7z x -y libs.7z
:: or:
"c:\Program Files\7-Zip\7z.exe" x -y libs.7z</code></pre>
<p>This should have created the folder <code>C:\local\libs\64</code>. A 32 bits folder may be present but is deprecated since 2017-12: operating systems are now largely 64 bits and we strongly recommend you use 64 bits version of the products.</p>
<section id="adding-environment-variable-library_path" class="level3">
<h3 class="anchored" data-anchor-id="adding-environment-variable-library_path">Adding environment variable LIBRARY_PATH</h3>
<p>The packages in R, python, (etc.) need a way to search for these native libraries. To do so, you should set up a User- or System-level environmental variable <code>LIBRARY_PATH</code>. The approach borrows from what is customary (albeit variable) on most Linux system for locating software libraries.</p>
<p>Go to the Control Panel, System and Security, Search for the string “environment”, and it should give you the link to <strong>Edit environment variables for your account</strong>.</p>
<ul>
<li>for the field “Variable name:” use <code>LIBRARY_PATH</code></li>
<li>for the field “Variable value:” use <code>c:\local\libs</code> (if you unzipped libs.7z into <code>c:\local</code> in the previous section)</li>
</ul>
</section>
</section>
</section>
<section id="installing-packages" class="level1">
<h1>Installing packages</h1>
<p>You can choose to install various higher level languages: R, Python, Matlab, C# and potentially others.</p>
<p>This section documents R and Python. You can install either, or both, depending on your needs.</p>
<div class="callout-note callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Note
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section mostly assumes you are installing from the Windows Installer, not manually. You may need to adapt a few things if you installed manually.</p>
</div>
</div>
<p>From the start menu, go to “All apps” (note: screen captures are made on Windows 11).</p>
<p><img src="./media/image12.png" style="width:5.83415in;height:1.59397in"></p>
<p>In the “S” section you will find a “Streamflow Forecasting” folder, with a shortcut to the installation folder.</p>
<p><img src="./media/image13.png" style="width:6.26806in;height:2.09583in"></p>
<p>This will open the installation folder which includes the additional files for R, python and matlab.</p>
<p><img src="./media/image14.png" style="width:6.26806in;height:2.8125in"></p>
<section id="r-packages" class="level2">
<h2 class="anchored" data-anchor-id="r-packages">R packages</h2>
<p>R packages are available in source and precompiled “win.binaries” form. The latter is easy and fast. Installing from source is out of scope of this document. However, Windows binary packages are version dependent. The installer includes packages for R 4.2.x, the current latest stable version of R. If you need another version of the packages, please contact the authors.</p>
<p>Open an R terminal.</p>
<p>Check with the command <code>.libPaths()</code> that the first folder is user specific, so that you will be able to install the packages. It is likely R would likely prompt you if not, and would created one in the process.</p>
<pre><code>[1] "C:/Users/xxxyyy/AppData/Local/R/win-library/4.2"
[2] "C:/Program Files/R/R-4.2.1/library"             </code></pre>
<p>An alternate possibility is to specify a custom library directory via the <code>R_LIBS</code> environment variable.</p>
<section id="adding-an-r_libs-environment-variable" class="level3">
<h3 class="anchored" data-anchor-id="adding-an-r_libs-environment-variable">Adding an R_LIBS environment variable</h3>
<p>This step is not compulsory.</p>
<p>While not required, you can set up an additional R library location, specified via an environment variable <code>R_LIBS</code> at the machine or user level. This can facilitate access to R packages for all users and upgrades to newer version of R down the track. you can install the packages in the other library folders that R creates (user-specific if you do not have admin rights)</p>
</section>
<section id="installing-an-r-package" class="level3">
<h3 class="anchored" data-anchor-id="installing-an-r-package">Installing an R package</h3>
<p>Then you will need the root name of the small R library folder where R packages are, e.g.&nbsp;“C:\Users\xxxyyy\AppData\Local\Programs\SF\R” if you have chosen the default option for an destination folder.</p>
<p>Adapting the following command should install the streamflow forecasting packages and their third party dependencies</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">install.packages</span>(<span class="fu">c</span>(<span class="st">'calibragem'</span>, <span class="st">'mhplot'</span>, <span class="st">'efts'</span>, <span class="st">'swift'</span>,</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="st">'qpp'</span>),</span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a><span class="at">repos=</span><span class="fu">c</span>(<span class="st">'file:///C:/Users/xxxyyy/AppData/Local/Programs/SF/R'</span>,</span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a><span class="st">'https://cran.csiro.au'</span>), <span class="at">type=</span><span class="st">'win.binary'</span>)<span class="st">`</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>Upon successful installation you should be able to load the <code>swift</code> package:</p>
<p><img src="./media/image15.png" style="width:6.26806in;height:1.61042in"></p>
<p>The command <code>?swift</code> should open an HTML page in a browser. At the bottom of the page you can find a shortcut to the package index.</p>
<p><img src="./media/image16.png" style="width:3.35463in;height:0.54174in"></p>
<p>The package Index page should also include a link to the introductory vignettes:</p>
<p><img src="./media/image17.png" style="width:6.26806in;height:3.46042in"></p>
</section>
</section>
<section id="python-packages" class="level2">
<h2 class="anchored" data-anchor-id="python-packages">Python packages</h2>
<section id="python-environments" class="level3">
<h3 class="anchored" data-anchor-id="python-environments">Python environments</h3>
<p>We <strong>strongly</strong> advise you to use python virtual environments to execute these tools via python.</p>
<p>There are various methods for these, but typically <code>venv</code> (virtual environments) or <code>conda</code></p>
<p>This section documents the process using <code>conda</code>.</p>
<p>There are various options to set up a suotable python environment to run. This document outlines using <code>conda</code>. If you do not have any preexisting environments, we recommend you use <a href="https://github.com/conda-forge/miniforge#mambaforge">mambaforge</a>, but you may have already it installed on your Windows box by e.g.&nbsp;your IT department installation management software.</p>
<p>This document assumes you start from the base environment, for instance:</p>
<pre class="text"><code>(base) C:\Users\xxxyyy&gt;conda env list
# conda environments:
#
base                  *  C:\Users\xxxyyy\Miniconda3</code></pre>
<p>We recommend you use the <code>mamba</code> package, a newer and faster drop-in replacement for <code>conda</code>. This is optional.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="ex">conda</span> install <span class="at">-c</span> conda-forge mamba</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</section>
<section id="installing-python-packages" class="level3">
<h3 class="anchored" data-anchor-id="installing-python-packages">Installing Python packages</h3>
<p>Below remember to replace <code>mamba</code> by <code>conda</code> if you have not installed mamba.</p>
<pre class="text"><code>set env_name="hydrofc"
mamba create -n %env_name% -c conda-forge python=3.9 xarray cffi pandas numpy matplotlib ipykernel jsonpickle netcdf4 seaborn
REM note to self seaborn used in swift2 sample notebooks, so somewhat optional.</code></pre>
<p>Register the new conda environment as a “kernel” for jupyter notebooks</p>
<pre class="bat"><code>conda activate %env_name%
python -m ipykernel install --user --name %env_name% --display-name "HFC"</code></pre>
<p>From here on all commands are done from within this new conda environment</p>
<p>You may already have <code>jupyter-lab</code> installed in another conda environment. You may use it to run ‘hydrofc’ notebooks. If not, install <code>jupyter-lab</code> in this new environment with:</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode sh code-with-copy"><code class="sourceCode bash"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="ex">mamba</span> install <span class="at">-c</span> conda-forge jupyterlab</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<p>You may need to install some additional conda packages depending on the notebooks you are using.</p>
<p>We can now install “our” packages. we can install from ‘wheels’, or from source code (for developers)</p>
<p>Two dependencies <code>refcount</code> and <code>cinterop</code> are on pypi, but should also be in the zip archive as wheels as well; prefer the latter.</p>
<p>If installed from the Windows installer, you should have the wheels in a folder such as “C:\Users\xxxyyy\AppData\Local\Programs\SF\python” if you have chosen the default option for an destination folder.</p>
<p>To install “wheels”, if you got them from a zip file:</p>
<pre class="bat"><code>cd  C:\tmp\sf
7z x python.7z</code></pre>
<p>or</p>
<pre class="bat"><code>cd C:\Users\xxxyyy\AppData\Local\Programs\SF\python</code></pre>
<p>Then, after having activated your conda environment if need be:</p>
<pre class="bat"><code>:: Adapt the following to the versions you have.
pip install --force-reinstall --no-deps refcount-0.9.3-py2.py3-none-any.whl
pip install --force-reinstall --no-deps cinterop-0.9.0-py2.py3-none-any.whl
pip install --force-reinstall --no-deps uchronia-2.3.7-py2.py3-none-any.whl
pip install --force-reinstall --no-deps swift2-2.3.7-py2.py3-none-any.whl
pip install --force-reinstall --no-deps fogss-0.3-py2.py3-none-any.whl</code></pre>
</section>
</section>
<section id="matlab-functions" class="level2">
<h2 class="anchored" data-anchor-id="matlab-functions">Matlab functions</h2>
<div class="callout-warning callout callout-style-default callout-captioned">
<div class="callout-header d-flex align-content-center">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<div class="callout-caption-container flex-fill">
Warning
</div>
</div>
<div class="callout-body-container callout-body">
<p>This section is a draft, indicative only.</p>
<p>Our MATLAB bindings are known to work very well, but the requirements from MATLAB for C/C++ compilers can be fiddly to figure out and set up, and this section has not been fully validated recently.</p>
</div>
</div>
<p>If installed from the Windows installer, you should have the MATLAB functions in a folder such as “C:\Users\xxxyyy\AppData\Local\Programs\SF\matlab” if you have chosen the default option for an destination folder.</p>
<p>You will find bindings for SWIFT and FoGSS.</p>
<section id="cc-compiler-visual-studio" class="level3">
<h3 class="anchored" data-anchor-id="cc-compiler-visual-studio">C/C++ compiler Visual Studio</h3>
<p>If you have Visual Studio with the C++ compiler installed on your machine, chances are that MATLAB can detect and use it. Otherwise using the MinGW64 toolchain has also been successfully tested.</p>
</section>
<section id="installing-mingw64" class="level3">
<h3 class="anchored" data-anchor-id="installing-mingw64">Installing Mingw64</h3>
<p>Read the <a href="https://au.mathworks.com/matlabcentral/fileexchange/52848-matlab-support-for-mingw-w64-c-c-compiler">MATLAB Support for MinGW-w64 C/C++ Compiler</a> page. You will find some information on versions of GCC you need depending on the version of MATLAB you are using.</p>
<p>Head to <a href="https://www.mingw-w64.org/">Mingw-w64</a> and the download section for “MingW-W64-builds”</p>
<p>Older versions of MATLAB may require versions of GCC that are more difficult to obtain. Around 2017 MATLAB required GCC version 5.3 which appears harder to obtain as of 2023. Users with older versions of MATLAB may find useful material in this <a href="https://sourceforge.net/projects/mingw-w64/files/mingw-w64/mingw-w64-release/">MinGW-w64 - for 32 and 64 bit Windows Files on Sourceforge</a>. This is indicative only and download and use is for you to judge. As a hint, for matlab 2017 an installer version <code>x86_64-5.3.0-posix-seh-rt_v4-rev0</code> was needed.</p>
</section>
<section id="compiling-the-mex-code-for-swift" class="level3">
<h3 class="anchored" data-anchor-id="compiling-the-mex-code-for-swift">Compiling the MEX code for swift</h3>
<p>In order to capture error messages from the swift library the matlab code needs a bit of MEX code. At the matlab prompt:</p>
<div class="sourceCode" id="cb12"><pre class="sourceCode matlab code-with-copy"><code class="sourceCode matlab"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="va">setenv</span>(<span class="ss">'MW_MINGW64_LOC'</span><span class="op">,</span> <span class="ss">'C:\Users\xxxyyy\prog\mingw-w64\x86_64-5.3.0-posix-seh-rt_v4-rev0\mingw64'</span>)</span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="va">cd</span>(<span class="ss">'C:/src/csiro/stash/swift/bindings/matlab/interop'</span>)</span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a><span class="va">mex</span> <span class="op">-</span><span class="va">L</span><span class="st">"C:/localdev/libs/64"</span> <span class="op">-</span><span class="va">lswift</span> <span class="va">registerSwiftExceptionCallback</span>.<span class="va">cpp</span></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-5"><a href="#cb12-5" aria-hidden="true" tabindex="-1"></a><span class="co">%% I seemed to need the addpath calls for  createSwiftPrototype to work</span></span>
<span id="cb12-6"><a href="#cb12-6" aria-hidden="true" tabindex="-1"></a><span class="va">bindingsLocation</span> <span class="op">=</span> <span class="ss">'C:/src/csiro/stash/swift/bindings/matlab'</span><span class="op">;</span></span>
<span id="cb12-7"><a href="#cb12-7" aria-hidden="true" tabindex="-1"></a><span class="va">addpath</span>(<span class="va">fullfile</span>(<span class="va">bindingsLocation</span><span class="op">,</span> <span class="ss">'datatypes'</span>))<span class="op">;</span></span>
<span id="cb12-8"><a href="#cb12-8" aria-hidden="true" tabindex="-1"></a><span class="va">addpath</span>(<span class="va">fullfile</span>(<span class="va">bindingsLocation</span><span class="op">,</span> <span class="ss">'native'</span>))<span class="op">;</span></span>
<span id="cb12-9"><a href="#cb12-9" aria-hidden="true" tabindex="-1"></a><span class="va">addpath</span>(<span class="va">fullfile</span>(<span class="va">bindingsLocation</span><span class="op">,</span> <span class="ss">'interop'</span>))<span class="op">;</span></span>
<span id="cb12-10"><a href="#cb12-10" aria-hidden="true" tabindex="-1"></a><span class="va">addpath</span>(<span class="va">fullfile</span>(<span class="va">bindingsLocation</span><span class="op">,</span> <span class="ss">'external'</span>))<span class="op">;</span></span>
<span id="cb12-11"><a href="#cb12-11" aria-hidden="true" tabindex="-1"></a><span class="va">addpath</span>(<span class="ss">'c:/localdev/libs/64'</span>)<span class="op">;</span></span>
<span id="cb12-12"><a href="#cb12-12" aria-hidden="true" tabindex="-1"></a><span class="va">addpath</span>(<span class="ss">'c:/local/libs/64'</span>)<span class="op">;</span></span>
<span id="cb12-13"><a href="#cb12-13" aria-hidden="true" tabindex="-1"></a><span class="va">cd</span>(<span class="ss">'C:/src/csiro/stash/swift/bindings/matlab/native'</span>)</span>
<span id="cb12-14"><a href="#cb12-14" aria-hidden="true" tabindex="-1"></a><span class="va">createSwiftPrototype</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>


</section>
</section>
</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const disableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'prefetch';
    }
  }
  const enableStylesheet = (stylesheets) => {
    for (let i=0; i < stylesheets.length; i++) {
      const stylesheet = stylesheets[i];
      stylesheet.rel = 'stylesheet';
    }
  }
  const manageTransitions = (selector, allowTransitions) => {
    const els = window.document.querySelectorAll(selector);
    for (let i=0; i < els.length; i++) {
      const el = els[i];
      if (allowTransitions) {
        el.classList.remove('notransition');
      } else {
        el.classList.add('notransition');
      }
    }
  }
  const toggleColorMode = (alternate) => {
    // Switch the stylesheets
    const alternateStylesheets = window.document.querySelectorAll('link.quarto-color-scheme.quarto-color-alternate');
    manageTransitions('#quarto-margin-sidebar .nav-link', false);
    if (alternate) {
      enableStylesheet(alternateStylesheets);
      for (const sheetNode of alternateStylesheets) {
        if (sheetNode.id === "quarto-bootstrap") {
          toggleBodyColorMode(sheetNode);
        }
      }
    } else {
      disableStylesheet(alternateStylesheets);
      toggleBodyColorPrimary();
    }
    manageTransitions('#quarto-margin-sidebar .nav-link', true);
    // Switch the toggles
    const toggles = window.document.querySelectorAll('.quarto-color-scheme-toggle');
    for (let i=0; i < toggles.length; i++) {
      const toggle = toggles[i];
      if (toggle) {
        if (alternate) {
          toggle.classList.add("alternate");     
        } else {
          toggle.classList.remove("alternate");
        }
      }
    }
    // Hack to workaround the fact that safari doesn't
    // properly recolor the scrollbar when toggling (#1455)
    if (navigator.userAgent.indexOf('Safari') > 0 && navigator.userAgent.indexOf('Chrome') == -1) {
      manageTransitions("body", false);
      window.scrollTo(0, 1);
      setTimeout(() => {
        window.scrollTo(0, 0);
        manageTransitions("body", true);
      }, 40);  
    }
  }
  const isFileUrl = () => { 
    return window.location.protocol === 'file:';
  }
  const hasAlternateSentinel = () => {  
    let styleSentinel = getColorSchemeSentinel();
    if (styleSentinel !== null) {
      return styleSentinel === "alternate";
    } else {
      return false;
    }
  }
  const setStyleSentinel = (alternate) => {
    const value = alternate ? "alternate" : "default";
    if (!isFileUrl()) {
      window.localStorage.setItem("quarto-color-scheme", value);
    } else {
      localAlternateSentinel = value;
    }
  }
  const getColorSchemeSentinel = () => {
    if (!isFileUrl()) {
      const storageValue = window.localStorage.getItem("quarto-color-scheme");
      return storageValue != null ? storageValue : localAlternateSentinel;
    } else {
      return localAlternateSentinel;
    }
  }
  let localAlternateSentinel = 'default';
  // Dark / light mode switch
  window.quartoToggleColorScheme = () => {
    // Read the current dark / light value 
    let toAlternate = !hasAlternateSentinel();
    toggleColorMode(toAlternate);
    setStyleSentinel(toAlternate);
  };
  // Ensure there is a toggle, if there isn't float one in the top right
  if (window.document.querySelector('.quarto-color-scheme-toggle') === null) {
    const a = window.document.createElement('a');
    a.classList.add('top-right');
    a.classList.add('quarto-color-scheme-toggle');
    a.href = "";
    a.onclick = function() { try { window.quartoToggleColorScheme(); } catch {} return false; };
    const i = window.document.createElement("i");
    i.classList.add('bi');
    a.appendChild(i);
    window.document.body.appendChild(a);
  }
  // Switch to dark mode if need be
  if (hasAlternateSentinel()) {
    toggleColorMode(true);
  } else {
    toggleColorMode(false);
  }
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">© CC-By CSIRO</div>   
    <div class="nav-footer-right">This page is built with <a href="https://quarto.org/">Quarto</a></div>
  </div>
</footer>



</body></html>